{"id":"../node_modules/@projectstorm/react-canvas-core/dist/es/core-models/BaseEntity.js","dependencies":[{"name":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\dist\\es\\core-models\\BaseEntity.js.map","includedInParent":true,"mtime":1594481777970},{"name":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\src\\core-models\\BaseEntity.ts","includedInParent":true,"mtime":1594481777970},{"name":"C:\\myprojects\\groupthink\\Groupthink\\package.json","includedInParent":true,"mtime":1594485675900},{"name":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\package.json","includedInParent":true,"mtime":1594481777970},{"name":"../Toolkit","loc":{"line":4,"column":26},"parent":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\dist\\es\\core-models\\BaseEntity.js","resolved":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\dist\\es\\Toolkit.js"},{"name":"lodash","loc":{"line":5,"column":18},"parent":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\dist\\es\\core-models\\BaseEntity.js","resolved":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\lodash\\lodash.js"},{"name":"../core/BaseObserver","loc":{"line":6,"column":31},"parent":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\dist\\es\\core-models\\BaseEntity.js","resolved":"C:\\myprojects\\groupthink\\Groupthink\\node_modules\\@projectstorm\\react-canvas-core\\dist\\es\\core\\BaseObserver.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseEntity = void 0;\nconst Toolkit_1 = require(\"../Toolkit\");\nconst _ = require(\"lodash\");\nconst BaseObserver_1 = require(\"../core/BaseObserver\");\nclass BaseEntity extends BaseObserver_1.BaseObserver {\n    constructor(options = {}) {\n        super();\n        this.options = Object.assign({ id: Toolkit_1.Toolkit.UID() }, options);\n    }\n    getOptions() {\n        return this.options;\n    }\n    getID() {\n        return this.options.id;\n    }\n    doClone(lookupTable = {}, clone) {\n        /*noop*/\n    }\n    clone(lookupTable = {}) {\n        // try and use an existing clone first\n        if (lookupTable[this.options.id]) {\n            return lookupTable[this.options.id];\n        }\n        let clone = _.cloneDeep(this);\n        clone.options = Object.assign(Object.assign({}, this.options), { id: Toolkit_1.Toolkit.UID() });\n        clone.clearListeners();\n        lookupTable[this.options.id] = clone;\n        this.doClone(lookupTable, clone);\n        return clone;\n    }\n    clearListeners() {\n        this.listeners = {};\n    }\n    deserialize(event) {\n        this.options.id = event.data.id;\n        this.options.locked = event.data.locked;\n    }\n    serialize() {\n        return {\n            id: this.options.id,\n            locked: this.options.locked\n        };\n    }\n    fireEvent(event, k) {\n        super.fireEvent(Object.assign({ entity: this }, event), k);\n    }\n    isLocked() {\n        return this.options.locked;\n    }\n    setLocked(locked = true) {\n        this.options.locked = locked;\n        this.fireEvent({\n            locked: locked\n        }, 'lockChanged');\n    }\n}\nexports.BaseEntity = BaseEntity;\n"},"sourceMaps":{"js":{"version":3,"file":"BaseEntity.js","sourceRoot":"","sources":["../../../src/core-models/BaseEntity.ts"],"names":[],"mappings":";;;AAAA,wCAAqC;AACrC,4BAA4B;AAE5B,uDAA6E;AA+B7E,MAAa,UAA8D,SAAQ,2BAA2B;IAG7G,YAAY,UAAwB,EAAE;QACrC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,OAAO,mBACX,EAAE,EAAE,iBAAO,CAAC,GAAG,EAAE,IACd,OAAO,CACV,CAAC;IACH,CAAC;IAED,UAAU;QACT,OAAO,IAAI,CAAC,OAAO,CAAC;IACrB,CAAC;IAED,KAAK;QACJ,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;IACxB,CAAC;IAED,OAAO,CAAC,cAAoC,EAAE,EAAE,KAAU;QACzD,QAAQ;IACT,CAAC;IAED,KAAK,CAAC,cAAoC,EAAE;QAC3C,sCAAsC;QACtC,IAAI,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE;YACjC,OAAO,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;SACpC;QACD,IAAI,KAAK,GAAG,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC9B,KAAK,CAAC,OAAO,mCACT,IAAI,CAAC,OAAO,KACf,EAAE,EAAE,iBAAO,CAAC,GAAG,EAAE,GACjB,CAAC;QACF,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;QAErC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QACjC,OAAO,KAAK,CAAC;IACd,CAAC;IAED,cAAc;QACb,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,WAAW,CAAC,KAA6B;QACxC,IAAI,CAAC,OAAO,CAAC,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;IACzC,CAAC;IAED,SAAS;QACR,OAAO;YACN,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACnB,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;SAC3B,CAAC;IACH,CAAC;IAED,SAAS,CAA8C,KAAQ,EAAE,CAAsB;QACtF,KAAK,CAAC,SAAS,iBAEb,MAAM,EAAE,IAAI,IACT,KAAK,GAET,CAAC,CACD,CAAC;IACH,CAAC;IAEM,QAAQ;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;IAC5B,CAAC;IAEM,SAAS,CAAC,SAAkB,IAAI;QACtC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;QAC7B,IAAI,CAAC,SAAS,CACb;YACC,MAAM,EAAE,MAAM;SACd,EACD,aAAa,CACb,CAAC;IACH,CAAC;CACD;AA/ED,gCA+EC","sourcesContent":["import { Toolkit } from '../Toolkit';\nimport * as _ from 'lodash';\nimport { CanvasEngine } from '../CanvasEngine';\nimport { BaseEvent, BaseListener, BaseObserver } from '../core/BaseObserver';\nimport { AbstractModelFactory } from '../core/AbstractModelFactory';\nimport { BaseModel } from './BaseModel';\n\nexport interface BaseEntityEvent<T extends BaseEntity = BaseEntity> extends BaseEvent {\n\tentity: T;\n}\n\nexport interface BaseEntityListener<T extends BaseEntity = BaseEntity> extends BaseListener {\n\tlockChanged?(event: BaseEntityEvent<T> & { locked: boolean }): void;\n}\n\nexport type BaseEntityType = 'node' | 'link' | 'port' | 'point';\n\nexport interface BaseEntityOptions {\n\tid?: string;\n\tlocked?: boolean;\n}\n\nexport type BaseEntityGenerics = {\n\tLISTENER: BaseEntityListener;\n\tOPTIONS: BaseEntityOptions;\n};\n\nexport interface DeserializeEvent<T extends BaseEntity = BaseEntity> {\n\tengine: CanvasEngine;\n\tdata: ReturnType<T['serialize']>;\n\tregisterModel(model: BaseModel);\n\tgetModel<T extends BaseModel>(id: string): Promise<T>;\n}\n\nexport class BaseEntity<T extends BaseEntityGenerics = BaseEntityGenerics> extends BaseObserver<T['LISTENER']> {\n\tprotected options: T['OPTIONS'];\n\n\tconstructor(options: T['OPTIONS'] = {}) {\n\t\tsuper();\n\t\tthis.options = {\n\t\t\tid: Toolkit.UID(),\n\t\t\t...options\n\t\t};\n\t}\n\n\tgetOptions() {\n\t\treturn this.options;\n\t}\n\n\tgetID() {\n\t\treturn this.options.id;\n\t}\n\n\tdoClone(lookupTable: { [s: string]: any } = {}, clone: any) {\n\t\t/*noop*/\n\t}\n\n\tclone(lookupTable: { [s: string]: any } = {}) {\n\t\t// try and use an existing clone first\n\t\tif (lookupTable[this.options.id]) {\n\t\t\treturn lookupTable[this.options.id];\n\t\t}\n\t\tlet clone = _.cloneDeep(this);\n\t\tclone.options = {\n\t\t\t...this.options,\n\t\t\tid: Toolkit.UID()\n\t\t};\n\t\tclone.clearListeners();\n\t\tlookupTable[this.options.id] = clone;\n\n\t\tthis.doClone(lookupTable, clone);\n\t\treturn clone;\n\t}\n\n\tclearListeners() {\n\t\tthis.listeners = {};\n\t}\n\n\tdeserialize(event: DeserializeEvent<this>) {\n\t\tthis.options.id = event.data.id;\n\t\tthis.options.locked = event.data.locked;\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t\tid: this.options.id,\n\t\t\tlocked: this.options.locked\n\t\t};\n\t}\n\n\tfireEvent<L extends Partial<BaseEntityEvent> & object>(event: L, k: keyof T['LISTENER']) {\n\t\tsuper.fireEvent(\n\t\t\t{\n\t\t\t\tentity: this,\n\t\t\t\t...event\n\t\t\t},\n\t\t\tk\n\t\t);\n\t}\n\n\tpublic isLocked(): boolean {\n\t\treturn this.options.locked;\n\t}\n\n\tpublic setLocked(locked: boolean = true) {\n\t\tthis.options.locked = locked;\n\t\tthis.fireEvent(\n\t\t\t{\n\t\t\t\tlocked: locked\n\t\t\t},\n\t\t\t'lockChanged'\n\t\t);\n\t}\n}\n"]}},"error":null,"hash":"aca6bf452b701ce5683c89238dbbd1e5","cacheData":{"env":{}}}